(()=>{"use strict";const e=e=>{const t=document.getElementById(e),o=document.querySelectorAll("button[type=submit]"),n=e[4]-1;o.forEach((e=>e.setAttribute("disabled","disabled"))),document.querySelectorAll("input").forEach((e=>e.addEventListener("input",(()=>{let e=0;for(let o of new FormData(t).entries())""===o[1]&&(e+=1);e?o[n].setAttribute("disabled","disabled"):o[n].removeAttribute("disabled")}))));const s=document.createElement("div");s.style.cssText="font-size: 2rem;",t.addEventListener("submit",(e=>{e.preventDefault(),t.appendChild(s),s.textContent="",s.classList.add("sk-pulse"),s.style.cssText="margin: auto";const o=new FormData(t);let n={};for(let e of o.entries())n[e[0]]=e[1];fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{if(200!==e.status)throw new Error(`Что-то пошло не так, код ошибки - ${e.status}`);s.textContent="Заявка была отправлена",s.style.color="#FFFFFF",c()})).catch((e=>{console.log(e),s.textContent="Что-то пошло не так",c()}))}));const c=()=>{a(t),s.classList.remove("sk-pulse"),s.style.cssText="",o[n].setAttribute("disabled","disabled"),setTimeout((()=>{s.textContent=""}),3e3),"form3"===e&&setTimeout((()=>{document.querySelector(".popup").style.display="none"}),2e3)},a=e=>{e.querySelectorAll("input").forEach((e=>e.value=""))}};document.addEventListener("DOMContentLoaded",(()=>{(function(){let e=new Date,t=`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()+1}`,o=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),s=document.querySelector("#timer-seconds");function c(){let o=(new Date(t).getTime()-(new Date).getTime())/1e3;return Math.floor(o/60/60)-24+24<0?(e=new Date,void(t=`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()+1}`)):function(e,...t){t=t.map((e=>e<10?"0"+e:""+e));let[n,s,c]=[...t];return{timeRemaining:o,seconds:n,minutes:s,hours:c}}(0,Math.floor(o%60),Math.floor(o/60%60),Math.floor(o/60/60))}let a=c();o.textContent=a.hours,n.textContent=a.minutes,s.textContent=a.seconds;const l=setInterval((()=>{let e=c();void 0!==e?(o.textContent=e.hours,n.textContent=e.minutes,s.textContent=e.seconds,e.timeRemaining<=1&&clearInterval(l)):clearInterval(l)}),1e3)})(),(()=>{const e=document.querySelector("menu"),t=()=>e.classList.toggle("active-menu");function o(e,t){const o=e.offsetTop;let n,s=0;n=requestAnimationFrame((function e(){var c;n=requestAnimationFrame(e),c=t,s>.95*o&&1!==c?c/=2:o>4e3?c+=3:o>3e3&&(c+=2),s+=20*c,document.documentElement.scrollTop=s,s>o&&(document.documentElement.scrollTop=o,cancelAnimationFrame(n))}))}document.addEventListener("click",(n=>{let s=n.target;if(s.closest("main")&&!e.classList.contains("active-menu"))s.closest(".menu")?t():s.closest('a[href="#service-block"]')&&(n.preventDefault(),o(document.getElementById("service-block"),2));else if(e.classList.contains("active-menu"))if(null===s.closest("menu")||s.classList.contains("close-btn"))t();else if("A"===s.tagName&&!s.classList.contains(".close-btn")){n.preventDefault(),t();const e=s.getAttribute("href").substring(1);o(document.getElementById(e),3)}}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),o=e.querySelector(".popup-content"),n=o.getBoundingClientRect().x;t.forEach((t=>t.addEventListener("click",(()=>{e.style.display="block",screen.width>768&&function(){let e,t=-1200;o.style.transform=`translate(${t}px)`;const s=()=>{e=requestAnimationFrame(s),t+=50,t>=n-50&&cancelAnimationFrame(e),o.style.transform=`translate(${t}px)`};s()}()})))),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,s)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(s)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),o=document.querySelector(".portfolio-dots");(()=>{for(let t=0;t<e.length;t++){const e=document.createElement("li");o.appendChild(e),e.classList.add("dot"),0===t&&e.classList.add("dot-active")}})();const n=document.querySelectorAll(".dot");let s,c=0;const a=(e,t,o)=>{e[t].classList.remove(o)},l=(e,t,o)=>{e[t].classList.add(o)},r=()=>{a(e,c,"portfolio-item-active"),a(n,c,"dot-active"),c++,c>=e.length&&(c=0),l(e,c,"portfolio-item-active"),l(n,c,"dot-active")},i=(e=3e3)=>{s=setInterval(r,e)};t.addEventListener("click",(t=>{t.preventDefault();const o=t.target;o.matches(".portfolio-btn, .dot")&&(a(e,c,"portfolio-item-active"),a(n,c,"dot-active"),o.matches("#arrow-right")?c++:o.matches("#arrow-left")?c--:o.matches(".dot")&&n.forEach(((e,t)=>{e===o&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),l(e,c,"portfolio-item-active"),l(n,c,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(s)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)})(),document.querySelectorAll("#command .command__photo").forEach((e=>{const t=e.getAttribute("src"),o=e.dataset.img;e.addEventListener("mouseenter",(e=>e.target.src=o)),e.addEventListener("mouseleave",(e=>e.target.src=t))})),document.querySelectorAll("input").forEach((e=>{e.matches(".form-email")?e.addEventListener("blur",(()=>{e.classList.add("succses"),e.value=e.value.match(/\w+@\w+\.\w{2,3}/g),e.value||e.classList.remove("succses")})):e.matches(".form-phone")?e.addEventListener("blur",(()=>{e.value=e.value.match(/\+?[78]([-()]*\d){10}/g)})):e.matches(".top-form")||e.matches(".form-name")||e.matches(".mess")?e.addEventListener("blur",(()=>{e.value=e.value.replace(/[^а-яА-ЯёЁ\s\-]|^[ -]*|( |-)(?=\1)|[ -]*$/g,""),e.value=e.value.slice(0,1).toUpperCase()+e.value.slice(1,e.value.length)})):e.matches(".calc-item")&&!e.matches(".calc-type")&&e.addEventListener("blur",(()=>{e.value=e.value.replace(/\D/g,"")}))})),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),s=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),a=document.getElementById("total");t.addEventListener("change",(t=>{const l=t.target;(l.matches("select")||l.matches("input"))&&(()=>{let t=0,l=1,r=1;const i=+o.options[o.selectedIndex].value,u=+n.value;s.value>1&&(l+=(s.value-1)/10),c.value&&c.value<5?r*=2:c.value&&c.value<10&&(r*=1.5),i&&u&&(t=e*i*u*l*r);let d=1;const m=()=>{const e=requestAnimationFrame(m);d*=2,a.textContent=d,d>=t&&(a.textContent=Math.floor(t),cancelAnimationFrame(e))};requestAnimationFrame(m)})()}))})(100),e("form1"),e("form2"),e("form3")}))})();